const axios = require('axios');
const _ = require('lodash');


//const ids = [3903,3997,4100,4727,4739,4752,4776,4777,4801,4814,4818,4836,4837,4838,4839,4840,4845,4846,4848,4857,4874,4883,4891,4893,4897,4900,4901,4902,4903,4904,4906,4909,4912,4913,4914,4915,4916,4917,4918,4920,4921,4922,4923,4924,4925,4926,4929,4931,4932,4933,4940,4942,4943,4945,4946,4947,4948,4949,4950,4952,4953,4954,4955,4956,4959,4961,4962,4970,4971,4978,4982,4983,4984,4986,4989,4990];

const ids = [26789,27049,27354,27471,27472,27482,27524,27526,27533,27534,27544,27549,27554,27583,27585,27587,27588,27607,27608,27609,27613,27614,27615,27622,27626,27631,27632,27638,27646,27654,27661,27663,27677,27682,27694,27709,27715,27728,27731,27737,27738,27739,27740,27747,27748,27766,27770,27771,27773,27775,27779,27780,27792,27793,27795,27803,27827,27828,27838,27841,27842,27847,27850,27857,27858,27862,27863,27865,27883,27891,27892,27934,27939,27941,27942,27945,27947,27948,27965,27966,27973,27974,27975,27976,27978,27982,27997,28001,28002,28011,28021,28022,28029,28032,28033,28037,28047,28049,28060,28074,28075,28076,28079,28080,28081,28113,28114,28119,28120,28122,28123,28129,28130,28131,28142,28143,28150,28173,28174,28199,28201,28268,28274,28276];

const token = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjdXN0b21lcl9pZCI6MjIsImVtYWlsIjoib3JkZXJzQHVwdGVhbWNvLmNvbSIsImN1c3RvbWVyX25hbWUiOiJVcHRlYW1jbyAmIEZyaWVuZHMgVVNEIiwicmVmZXJyZXIiOiJsdXhjbHVzaWYiLCJpYXQiOjE1ODYxNjA1MDUsImV4cCI6MTU4NjI0NjkwNX0.AHvUh-t5JGZwh3mtcSMUNXZemaWuKenDFvvx2A0pcTs`;

const batchProcess = async(rows) => {
  return Promise.all(_.map(rows, async row => {
    
    try {
      const response = await axios.get(`https://system.upteamco.com/cms/___print/invoice.php?eid=${row}format=1&token=${token}`);
      //const response = await axios.get(`https://system.upteamco.com/cms/___print/credit_note.php?eid=${row}&token=${token}`);
      console.log(response.data);
    } catch (error) {
      console.error(error);
    }
  }));
};

batchProcess(ids);